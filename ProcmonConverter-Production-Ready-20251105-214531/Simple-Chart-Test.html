<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enhanced Charts Test - 7 Chart Types</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background: #f5f5f5; }
        .chart-container { background: white; border-radius: 12px; padding: 2rem; box-shadow: 0 2px 8px rgba(0,0,0,0.1); margin-bottom: 2rem; }
        h2 { color: #2c3e50; margin-bottom: 1.5rem; }
        .btn-group-sm .btn { margin: 0 2px; }
        .chart-canvas { height: 400px; }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="text-center mb-4">Enhanced Chart Test - All 7 Chart Types</h1>

        <!-- Process Chart -->
        <div class="chart-container">
            <div class="d-flex justify-content-between align-items-center mb-3">
                <h2><i class="fas fa-chart-bar me-2"></i>Process Activity Chart (5 processes)</h2>
                <div class="btn-group btn-group-sm" role="group">
                    <button type="button" class="btn btn-outline-primary chart-type-btn active" data-chart="process" data-type="bar" title="Bar Chart">
                        <i class="fas fa-chart-bar"></i> Bar
                    </button>
                    <button type="button" class="btn btn-outline-primary chart-type-btn" data-chart="process" data-type="line" title="Line Chart">
                        <i class="fas fa-chart-line"></i> Line
                    </button>
                    <button type="button" class="btn btn-outline-primary chart-type-btn" data-chart="process" data-type="area" title="Area Chart">
                        <i class="fas fa-chart-area"></i> Area
                    </button>
                    <button type="button" class="btn btn-outline-primary chart-type-btn" data-chart="process" data-type="doughnut" title="Doughnut Chart">
                        <i class="fas fa-circle-notch"></i> Doughnut
                    </button>
                    <button type="button" class="btn btn-outline-primary chart-type-btn" data-chart="process" data-type="pie" title="Pie Chart">
                        <i class="fas fa-chart-pie"></i> Pie
                    </button>
                    <button type="button" class="btn btn-outline-primary chart-type-btn" data-chart="process" data-type="radar" title="Radar Chart">
                        <i class="fas fa-fighter-jet"></i> Radar
                    </button>
                    <button type="button" class="btn btn-outline-primary chart-type-btn" data-chart="process" data-type="polarArea" title="Polar Area">
                        <i class="fas fa-sun"></i> Polar
                    </button>
                </div>
            </div>
            <div class="chart-canvas">
                <canvas id="processChart"></canvas>
            </div>
            <div class="mt-3 text-center">
                <button id="downloadProcessChart" class="btn btn-sm btn-success">
                    <i class="fas fa-download"></i> Download PNG
                </button>
            </div>
        </div>

        <!-- Operation Chart -->
        <div class="chart-container">
            <div class="d-flex justify-content-between align-items-center mb-3">
                <h2><i class="fas fa-cogs me-2"></i>Operation Distribution (5 operations)</h2>
                <div class="btn-group btn-group-sm" role="group">
                    <button type="button" class="btn btn-outline-success chart-type-btn active" data-chart="operation" data-type="doughnut" title="Doughnut Chart">
                        <i class="fas fa-circle-notch"></i> Doughnut
                    </button>
                    <button type="button" class="btn btn-outline-success chart-type-btn" data-chart="operation" data-type="line" title="Line Chart">
                        <i class="fas fa-chart-line"></i> Line
                    </button>
                    <button type="button" class="btn btn-outline-success chart-type-btn" data-chart="operation" data-type="area" title="Area Chart">
                        <i class="fas fa-chart-area"></i> Area
                    </button>
                    <button type="button" class="btn btn-outline-success chart-type-btn" data-chart="operation" data-type="bar" title="Bar Chart">
                        <i class="fas fa-chart-bar"></i> Bar
                    </button>
                    <button type="button" class="btn btn-outline-success chart-type-btn" data-chart="operation" data-type="pie" title="Pie Chart">
                        <i class="fas fa-chart-pie"></i> Pie
                    </button>
                    <button type="button" class="btn btn-outline-success chart-type-btn" data-chart="operation" data-type="radar" title="Radar Chart">
                        <i class="fas fa-fighter-jet"></i> Radar
                    </button>
                    <button type="button" class="btn btn-outline-success chart-type-btn" data-chart="operation" data-type="polarArea" title="Polar Area">
                        <i class="fas fa-sun"></i> Polar
                    </button>
                </div>
            </div>
            <div class="chart-canvas">
                <canvas id="operationChart"></canvas>
            </div>
            <div class="mt-3 text-center">
                <button id="downloadOperationChart" class="btn btn-sm btn-success">
                    <i class="fas fa-download"></i> Download PNG
                </button>
            </div>
        </div>

        <div class="alert alert-info">
            <h4>Test Checklist:</h4>
            <ul>
                <li>✓ Click each of the 7 chart type buttons for both charts</li>
                <li>✓ Verify Area charts show gradient backgrounds (blue for process, purple for operation)</li>
                <li>✓ Hover over chart elements to see tooltips with percentages</li>
                <li>✓ Observe smooth animations when switching chart types</li>
                <li>✓ Test download PNG buttons</li>
                <li>✓ Verify all chart types render correctly (Bar, Line, Area, Doughnut, Pie, Radar, Polar Area)</li>
            </ul>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.3.0/dist/chart.umd.js"></script>
    <script>
        // Sample data
        const processLabels = ['chrome.exe', 'explorer.exe', 'svchost.exe', 'System', 'powershell.exe'];
        const processData = [20, 20, 20, 20, 20];
        const operationLabels = ['RegOpenKey', 'CreateFile', 'ReadFile', 'WriteFile', 'CloseFile'];
        const operationData = [20, 20, 20, 20, 20];

        const colorPalette = [
            'rgba(102, 126, 234, 0.8)', 'rgba(118, 75, 162, 0.8)', 'rgba(40, 167, 69, 0.8)',
            'rgba(255, 193, 7, 0.8)', 'rgba(220, 53, 69, 0.8)'
        ];

        let processChart = null;
        let operationChart = null;
        const processCanvas = document.getElementById('processChart');
        const operationCanvas = document.getElementById('operationChart');

        // Chart creation function with professional gradients
        function createProcessChart(type) {
            if (processChart) processChart.destroy();

            const actualType = (type === 'area') ? 'line' : type;
            const isPieType = (type === 'pie' || type === 'doughnut' || type === 'polarArea');
            const isLineType = (type === 'line' || type === 'area');
            const isRadar = (type === 'radar');

            // Create gradient for area charts
            let gradient = null;
            if (type === 'area' && processCanvas) {
                const ctx = processCanvas.getContext('2d');
                gradient = ctx.createLinearGradient(0, 0, 0, 400);
                gradient.addColorStop(0, 'rgba(102, 126, 234, 0.5)');
                gradient.addColorStop(1, 'rgba(102, 126, 234, 0.0)');
            }

            const config = {
                type: actualType,
                data: {
                    labels: processLabels,
                    datasets: [{
                        label: 'Event Count',
                        data: processData,
                        backgroundColor: isPieType ? colorPalette.slice(0, processData.length) :
                                       (type === 'area' ? gradient :
                                       (isLineType ? 'rgba(102, 126, 234, 0.2)' : colorPalette[0])),
                        borderColor: isPieType ? colorPalette.slice(0, processData.length) : 'rgba(102, 126, 234, 1)',
                        borderWidth: 2,
                        fill: type === 'area',
                        tension: isLineType ? 0.4 : 0,
                        pointRadius: isLineType ? 4 : 0,
                        pointHoverRadius: isLineType ? 6 : 0,
                        pointBackgroundColor: 'rgba(102, 126, 234, 1)',
                        pointBorderColor: '#fff',
                        pointBorderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    animation: {
                        duration: 1000,
                        easing: 'easeInOutQuart'
                    },
                    plugins: {
                        legend: {
                            position: 'bottom',
                            display: true,
                            labels: {
                                padding: 15,
                                usePointStyle: true
                            }
                        },
                        tooltip: {
                            backgroundColor: 'rgba(0, 0, 0, 0.8)',
                            padding: 12,
                            titleFont: { size: 14, weight: 'bold' },
                            bodyFont: { size: 13 },
                            callbacks: {
                                label: function(context) {
                                    const value = context.parsed.y || context.parsed;
                                    const total = context.dataset.data.reduce((a, b) => a + b, 0);
                                    const percentage = ((value / total) * 100).toFixed(1);
                                    return context.label + ': ' + value.toLocaleString() + ' (' + percentage + '%)';
                                }
                            }
                        }
                    },
                    scales: (isLineType || type === 'bar') ? {
                        y: {
                            beginAtZero: true,
                            grid: { color: 'rgba(0, 0, 0, 0.05)' },
                            ticks: {
                                callback: function(value) {
                                    return value.toLocaleString();
                                }
                            }
                        },
                        x: {
                            grid: { color: 'rgba(0, 0, 0, 0.05)' }
                        }
                    } : (isRadar ? {
                        r: {
                            beginAtZero: true,
                            grid: { color: 'rgba(0, 0, 0, 0.1)' },
                            ticks: {
                                callback: function(value) {
                                    return value.toLocaleString();
                                }
                            }
                        }
                    } : {})
                }
            };

            processChart = new Chart(processCanvas, config);
        }

        function createOperationChart(type) {
            if (operationChart) operationChart.destroy();

            const actualType = (type === 'area') ? 'line' : type;
            const isPieType = (type === 'pie' || type === 'doughnut' || type === 'polarArea');
            const isLineType = (type === 'line' || type === 'area');
            const isRadar = (type === 'radar');

            // Create gradient for area charts
            let gradient = null;
            if (type === 'area' && operationCanvas) {
                const ctx = operationCanvas.getContext('2d');
                gradient = ctx.createLinearGradient(0, 0, 0, 400);
                gradient.addColorStop(0, 'rgba(118, 75, 162, 0.5)');
                gradient.addColorStop(1, 'rgba(118, 75, 162, 0.0)');
            }

            const config = {
                type: actualType,
                data: {
                    labels: operationLabels,
                    datasets: [{
                        label: 'Event Count',
                        data: operationData,
                        backgroundColor: isPieType ? colorPalette.slice(0, operationData.length) :
                                       (type === 'area' ? gradient :
                                       (isLineType ? 'rgba(118, 75, 162, 0.2)' : colorPalette[1])),
                        borderColor: isPieType ? colorPalette.slice(0, operationData.length) : 'rgba(118, 75, 162, 1)',
                        borderWidth: 2,
                        fill: type === 'area',
                        tension: isLineType ? 0.4 : 0,
                        pointRadius: isLineType ? 4 : 0,
                        pointHoverRadius: isLineType ? 6 : 0,
                        pointBackgroundColor: 'rgba(118, 75, 162, 1)',
                        pointBorderColor: '#fff',
                        pointBorderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    animation: {
                        duration: 1000,
                        easing: 'easeInOutQuart'
                    },
                    plugins: {
                        legend: {
                            position: 'bottom',
                            display: true,
                            labels: {
                                padding: 15,
                                usePointStyle: true
                            }
                        },
                        tooltip: {
                            backgroundColor: 'rgba(0, 0, 0, 0.8)',
                            padding: 12,
                            titleFont: { size: 14, weight: 'bold' },
                            bodyFont: { size: 13 },
                            callbacks: {
                                label: function(context) {
                                    const value = context.parsed.y || context.parsed;
                                    const total = context.dataset.data.reduce((a, b) => a + b, 0);
                                    const percentage = ((value / total) * 100).toFixed(1);
                                    return context.label + ': ' + value.toLocaleString() + ' (' + percentage + '%)';
                                }
                            }
                        }
                    },
                    scales: (isLineType || type === 'bar') ? {
                        y: {
                            beginAtZero: true,
                            grid: { color: 'rgba(0, 0, 0, 0.05)' },
                            ticks: {
                                callback: function(value) {
                                    return value.toLocaleString();
                                }
                            }
                        },
                        x: {
                            grid: { color: 'rgba(0, 0, 0, 0.05)' }
                        }
                    } : (isRadar ? {
                        r: {
                            beginAtZero: true,
                            grid: { color: 'rgba(0, 0, 0, 0.1)' },
                            ticks: {
                                callback: function(value) {
                                    return value.toLocaleString();
                                }
                            }
                        }
                    } : {})
                }
            };

            operationChart = new Chart(operationCanvas, config);
        }

        // Button handlers
        document.querySelectorAll('.chart-type-btn').forEach(button => {
            button.addEventListener('click', function() {
                const chartType = this.dataset.chart;
                const type = this.dataset.type;

                // Update active state
                this.closest('.btn-group').querySelectorAll('.chart-type-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                this.classList.add('active');

                // Create chart
                if (chartType === 'process') {
                    createProcessChart(type);
                } else if (chartType === 'operation') {
                    createOperationChart(type);
                }
            });
        });

        // Download handlers
        document.getElementById('downloadProcessChart').addEventListener('click', function() {
            if (processChart) {
                const link = document.createElement('a');
                link.download = 'process-chart.png';
                link.href = processChart.toBase64Image();
                link.click();
            }
        });

        document.getElementById('downloadOperationChart').addEventListener('click', function() {
            if (operationChart) {
                const link = document.createElement('a');
                link.download = 'operation-chart.png';
                link.href = operationChart.toBase64Image();
                link.click();
            }
        });

        // Initialize with default charts
        createProcessChart('bar');
        createOperationChart('doughnut');
    </script>
</body>
</html>

